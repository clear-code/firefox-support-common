# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

Download-1: ダウンロードマネージャの利用の可否

    :1: 利用する（既定）

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ダウンロードを開始する。
    - **確認**
        - ダウンロードの進行状況を示すポップアップが表示される。

    :2: 利用しない

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ダウンロードを開始する。
    - **確認**
        - ダウンロードの進行状況を示すポップアップが表示されない。

Download-2: ファイルの既定のダウンロード先

    :1: 指定する：任意

    - 既定のダウンロード先（ユーザー配下の「ダウンロード」、または`{{download_dir}}`）を用意しておく。用意できない場合は、設定の参照先を `C:\` などの実在するパスに変更し、以下の説明も読み替える。
    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - **確認**
        - ダウンロード先として `{{download_dir}}` が選択された状態でファイル選択ダイアログが開かれる。

    :4: 指定する：任意（ポリシーで設定）

    - 既定のダウンロード先（ユーザー配下の「ダウンロード」、または`{{download_dir}}`）を用意しておく。用意できない場合は、設定の参照先を `C:\` などの実在するパスに変更し、以下の説明も読み替える。
    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - **確認**
        - ダウンロード先として `{{download_dir}}` が選択された状態でファイル選択ダイアログが開かれる。

    :5: 指定する：任意の場所に固定（ポリシーで設定）

    - 既定のダウンロード先（ユーザー配下の「ダウンロード」、または`{{download_dir}}`）を用意しておく。用意できない場合は、設定の参照先を `C:\` などの実在するパスに変更し、以下の説明も読み替える。
    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - **確認**
        - ダウンロード先として `{{download_dir}}` が選択された状態でファイル選択ダイアログが開かれる。

    :2: 指定する：デスクトップ

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - **確認**
        - ダウンロード先として `{{download_dir}}` が選択された状態でファイル選択ダイアログが開かれる。

    :3: 指定しない（既定）

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - **確認**
        - ホームディレクトリ内の「ダウンロード」が選択された状態でファイル選択ダイアログが開かれる。

Download-3: ファイルのダウンロード先ディレクトリの制御

    :1: 全体で共通のディレクトリにダウンロードする（既定）

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - `subfolder` という名前でフォルダを作成し、そのフォルダを選択してダウンロードを開始する。
    - テストケースリストのリンクから `http://www.mozilla.org/` を開く。
    - Webページ中の任意のリンクを右クリックし、「名前を付けてリンク先を保存」を選択する。
    - **確認**
        1. ダウンロード先として `{{download_dir}}` 内の「subfolder」が選択された状態でファイル選択ダイアログが開かれる。
    - パネルメニューからオプションを開く。
    - オプション画面の「一般」を開く。
    - **確認**
        - 「ダウンロード」で「次のフォルダに保存する」が選択されている。
        - ダウンロード先として `{{download_dir}}` 内の `subfolder` が表示されている。

    :2: サイトごとにダウンロード先ディレクトリを保持する

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、ファイルの保存操作をキャンセルする。
    - 再ダウンロードのリンクを右クリックし、メニューから「名前を付けてリンク先を保存」を選択する。
    - `subfolder` という名前でフォルダを作成し、そのフォルダを選択してダウンロードを開始する。
    - テストケースリストのリンクから `http://www.mozilla.org/` を開く。
    - Webページ中の任意のリンクを右クリックし、「名前を付けてリンク先を保存」を選択する。
    - **確認**
        1. ダウンロード先として `{{download_dir}}` が選択された状態でファイル選択ダイアログが開かれる。
    - パネルメニューからオプションを開く。
    - オプション画面の「一般」を開く。
    - **確認**
        - 「ダウンロード」で「次のフォルダに保存する」が選択されている。
        - ダウンロード先として `{{download_dir}}` が表示されている。

    :3: ダウンロード先を固定せず、常にユーザに選択させる

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、「ファイルを保存」をクリックする。
    - **確認**
        - ダウンロード先ディレクトリを選択するダイアログが開かれる。
    - `about:policies` を開く。
    - 「有効」配下の各設定値を確認する。
    - **確認**
        - `PromptForDownloadLocation` の値が `true` である。

    :4: ダウンロード先を固定せず、常にユーザに選択させる（ポリシーで設定）

    - `{{meta_installer_file_name}}*.exe` が作成済みの状態にする。
    - 検証用ユーザーとして `{{meta_installer_file_name}}*.exe` を実行する。
      管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    - Firefoxを起動する。
    - テストケースリストのリンクから `https://getfirefox.com/` を開く。
    - 「今すぐダウンロード」のボタン（リンク）をクリックする。
    - ファイルのダウンロードが開始され、保存方法を尋ねるダイアログが表示されるので、「ファイルを保存」をクリックする。
    - **確認**
        - ダウンロード先ディレクトリを選択するダイアログが開かれる。
    - `about:policies` を開く。
    - 「有効」配下の各設定値を確認する。
    - **確認**
        - `PromptForDownloadLocation` の値が `true` である。

