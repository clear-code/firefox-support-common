# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

Tab-0: タブの設定の検証

   :1: 事前準備

    - 前項に引き続いて検証するか、{%if use_meta_installer %}または以下の状態を整えておく。
        - 作成済みの `{{meta_installer_file_name}}*.exe` を検証用ユーザーとして実行し、カスタマイズ済みFirefoxのインストールを完了している。
        - 管理者権限を要求された場合は、`管理者`ユーザーで認証する。
    {% else %}再ログオン、インストーラの手動実行など、所定の手順でFirefoxのインストール及びカスタマイズを反映済みの状態とする。{% endif %}

Tab-1: 複数のタブを閉じる際の警告の可否

    :1: 警告する（既定）

    - Firefoxを起動する。
    - 新しいウィンドウを開く。
    - 新しいウィンドウ内で新しいタブを2つ以上開く。
    - ウィンドウを閉じる操作を行う。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認される。

    :2: 警告しない

    - Firefoxを起動する。
    - 新しいウィンドウを開く。
    - 新しいウィンドウ内で新しいタブを2つ以上開く。
    - ウィンドウを閉じる操作を行う。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認されない。

    :3: 警告しないが、任意で警告を表示する状態に戻せる

    - Firefoxを起動する。
    - 新しいウィンドウを開く。
    - 新しいウィンドウ内で新しいタブを2つ以上開く。
    - ウィンドウを閉じる操作を行う。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認されない。
    - パネルメニューからオプションを開く。
    - オプション画面の「一般」を開く。
    - **確認**
        - 「タブグループ」配下に「同時に複数のタブを閉じるときは確認する」のチェックボックスがOFFの状態で表示されている。
    - チェックボックスをONにして、Firefoxを終了する。
    - Firefoxを起動する。
    - 新しいウィンドウを開く。
    - 新しいウィンドウ内で新しいタブを2つ以上開く。
    - ウィンドウを閉じる操作を行う。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認される。

Tab-2: 「他のタブをすべて閉じる」の警告の可否

    :1: 警告する（既定）

    - Firefoxを起動する。
    - 新しいタブを2つ以上開く。
    - タブを1つ選択し、右クリックして「他のタブをすべて閉じる」を選択する。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認される。

    :2: 警告しない

    - Firefoxを起動する。
    - 新しいタブを2つ以上開く。
    - タブを1つ選択し、右クリックして「他のタブをすべて閉じる」を選択する。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認されない。

    :3: 警告しないが、任意で警告を表示する状態に戻せる

    {%if Security_9_3 %}
    - ポリシー設定から `BlockAboutConfig` を削除し、`about:config` を一時的に有効化しておく。
      {% endif %}
    - Firefoxを起動する。
    - 新しいタブを2つ以上開く。
    - タブを1つ選択し、右クリックして「他のタブをすべて閉じる」を選択する。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認されない。
    - `about:config` を開く。
    - **確認**
        - `browser.tabs.warnOnCloseOtherTabs` の値がユーザー設定値の `false` である。
    - `browser.tabs.warnOnCloseOtherTabs` の値を `true` に変更する。
    - Firefoxを終了する。
    - Firefoxを起動する。
    - 新しいタブを2つ以上開く。
    - タブを1つ選択し、右クリックして「他のタブをすべて閉じる」を選択する。
    - **確認**
        - 複数のタブを閉じてよいかどうか確認される。
      {%if Security_9_3 %}
    - ポリシー設定から一時的に削除した `BlockAboutConfig` を元に戻す。
      {% endif %}

Tab-3: 複数のタブを一度に開く際の警告の可否

    :1: 警告する（既定）

    - Firefoxを起動する。
    - テストケースの `links.html` を開く。
    -  リンクからタブを開き、15以上のタブが開かれた状態にする。
    - タブを全て選択して右クリックし、メニューから「タブをブックマーク」を選択する。
    - フォルダ名を任意に指定し、ブックマークフォルダとして保存する。
    - メニューバーの「ブックマーク」から前の操作で作成されたブックマークフォルダを選択し、最下部の「タブですべて開く」を選択する。
    - **確認**
        - 一度に複数のタブを開いてよいかどうか確認される。

    :2: 警告しない

    - Firefoxを起動する。
    - テストケースの `links.html` を開く。
    -  リンクからタブを開き、15以上のタブが開かれた状態にする。
    - タブを全て選択して右クリックし、メニューから「タブをブックマーク」を選択する。
    - フォルダ名を任意に指定し、ブックマークフォルダとして保存する。
    - メニューバーの「ブックマーク」から前の操作で作成されたブックマークフォルダを選択し、最下部の「タブですべて開く」を選択する。
    - **確認**
        - 一度に複数のタブを開いてよいかどうか確認されない。

    :3: 警告しないが、任意で警告を表示する状態に戻せる

    - Firefoxを起動する。
    - テストケースの `links.html` を開く。
    -  リンクからタブを開き、15以上のタブが開かれた状態にする。
    - タブを全て選択して右クリックし、メニューから「タブをブックマーク」を選択する。
    - フォルダ名を任意に指定し、ブックマークフォルダとして保存する。
    - メニューバーの「ブックマーク」から前の操作で作成されたブックマークフォルダを選択し、最下部の「タブですべて開く」を選択する。
    - **確認**
        - 一度に複数のタブを開いてよいかどうか確認されない。
    - パネルメニューからオプションを開く。
    - オプション画面の「一般」を開く。
    - **確認**
        - 「タブグループ」配下に「同時に複数のタブを開いて Firefoxの動作が遅くなるときは確認する」のチェックボックスがOFFの状態で表示されている。
    - チェックボックスをONにして、Firefoxを終了する。
    - Firefoxを起動する。
    - メニューバーの「ブックマーク」から前の操作で作成されたブックマークフォルダを選択し、最下部の「タブですべて開く」を選択する。
    - **確認**
        - 一度に複数のタブを開いてよいかどうか確認される。

Tab-5: 新しいタブの内容

    :1: about:newtab（既定）

    - Firefoxを起動する。
    - タブバー上の「+」ボタンをクリックして新しいタブを開く。またはパネルメニューを開き、パネルメニュー内の「新しいウィンドウ」をクリックする。
    - **確認**
        - 右上に歯車アイコンのある空白ページが表示される。

    :4: アドオンを使わず空白ページを表示する

    - Firefoxを起動する。
    - タブバー上の「+」ボタンをクリックして新しいタブを開く。またはパネルメニューを開き、パネルメニュー内の「新しいウィンドウ」をクリックする。
    - **確認**
        - 右上に歯車アイコンのない空白ページが表示される。

    :5: スポンサーコンテンツを非表示にする

    - Firefoxを起動する。
    - タブバー上の「+」ボタンをクリックして新しいタブを開く。またはパネルメニューを開き、パネルメニュー内の「新しいウィンドウ」をクリックする。
    - **確認**
        - 右上に歯車アイコンのある、空白でないページが表示される。

Tab-6: Webページによって開かれる新規ウィンドウを、代わりにタブで開く

    :1: 許可する（既定）

    - Firefoxを起動する。
    - テストケースの `links.html` を開く。
    - 「window.open（サイズ指定あり）」のリンクをクリックする。
    - **確認**
        - ウィンドウが開かれる。

    :2: 禁止する

    - Firefoxを起動する。
    - テストケースの `links.html` を開く。
    - 「window.open（サイズ指定あり）」のリンクをクリックする。
    - **確認**
        - タブが開かれる。

Tab-9: 新しいタブを開く操作の高速化

    :1: 事前読み込みで高速化する（既定）

    ABOUT_CONFIG

    - `browser.newtab.preload` の値が `true` である。

    :2: 高速化しない（Tab-5-2選択時は常にこの動作）

    ABOUT_CONFIG

    - `browser.newtab.preload` の値がユーザー設定値の `false` であるか、`false` にロックされている。

Tab-10: 検索バーの表示

    :1: 表示する（既定）

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - 検索バーの表示を確認する。
    - **確認**
        - 画面上に検索バーが表示されている。
    {%endif%}

    :4: 常に表示する

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - 検索バーの表示を確認する。
    - **確認**
        - 画面上に検索バーが表示されている。
        - 右上の歯車ボタンの遷移先で「ウェブ検索」のチェックが固定されている。
    {%endif%}

    :5: 常に非表示にする

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - 検索バーの表示を確認する。
    - **確認**
        - 画面上に検索バーが表示されていない。
        - 右上の歯車ボタンの遷移先で「ウェブ検索」のチェックが固定されている。
    {%endif%}

Tab-11: トップサイトの表示

    :1: 表示する（既定）

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - 画面上にトップサイト（ショートカット）が表示されている。
    {%endif%}

    :3: 常に表示する（2段組）

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - トップサイト（ショートカット）が2行で表示されている。
        - 右上の歯車ボタンの遷移先で「ショートカット」のチェックが固定されている。
    {%endif%}

    :5: 常に表示する

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - 画面上にトップサイト（ショートカット）が表示されている。
        - 右上の歯車ボタンの遷移先で「ショートカット」のチェックが固定されている。
    {%endif%}

    :6: 常に非表示にする

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - 画面上にトップサイト（ショートカット）が表示されていない。
        - 右上の歯車ボタンの遷移先で「ショートカット」のチェックが固定されている。
    {%endif%}

    :7: 初期状態で特定の行数で表示するが、表示・非表示や行数の変更を許容する

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - トップサイト（ショートカット）が指定の行数で表示されている。
        - 右上の歯車ボタンの遷移先で「ショートカット」のチェックがONになっている。
        - ショートカットのチェック状態、行数の設定項目が固定されていない。
    {%endif%}

Tab-12: ハイライトの表示

    :1: 表示する（既定）

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - ハイライトの表示を確認する。
    - **確認**
        - 画面上にハイライトが表示されている。
    {%endif%}

    :4: 常に表示する

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - ハイライトの表示を確認する。
    - **確認**
        - 画面上にハイライトが表示されている。
        - 右上の歯車ボタンの遷移先で「ハイライト」のチェックが固定されている。
    {%endif%}

    :5: 常に非表示にする

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - ハイライトの表示を確認する。
    - **確認**
        - 画面上にハイライトが表示されていない。
        - 右上の歯車ボタンの遷移先で「ハイライト」のチェックが固定されている。
    {%endif%}

Tab-13: スニペットの表示

    :1: 表示する（既定）

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - 右上の歯車ボタンの遷移先で「スニペット」のチェックが入っている。
    {%endif%}

    :4: 常に表示する

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - 右上の歯車ボタンの遷移先で「スニペット」のチェックが入っており、固定されている。
    {%endif%}

    :5: 常に非表示にする

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - **確認**
        - 右上の歯車ボタンの遷移先で「スニペット」のチェックが外れており、固定されている。
    {%endif%}

Tab-14: インポートボタンの表示

    :3: 表示しない

    - Firefoxを起動する。
    - キーボードショートカット「Ctrl-Shift-B」を入力し、ブラウジングライブラリーを開く。
    - **確認**
        - 「インポートとバックアップ」のドロップダウンメニューで「他のブラウザーからデータをインポート」の項目が無効化されている。

Tab-16: トップサイトに表示されるウェブサイト

    :1: 変更しない（既定）

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - トップサイトの表示を確認する。
    - **確認**
        - 規定のサイトが一覧に表示されている。
    {%endif%}

    :2: 変更する

    {% if Tab_5_4 %}
    - Tab-5の設定により新規タブページが無効化されているため、この検証は省略する。
    {%else%}
    - Firefoxを起動する。
    - タブバーの「＋」ボタンをクリックして新しいタブを開く。
    - トップサイトの表示を確認する。
    - **確認**
        - 指定されたサイトが一覧に表示されている（空文字が指定されている場合は、トップサイト欄に何も表示されない）。
    {%endif%}

Tab-17: Ctrl-Tabでのタブ切り替え時の挙動

    :1: 最近使ったタブの順で切り替える（ESR68既定）

    - Firefoxを起動する。
    - 3つ以上のタブを開く。
    - キーボードショートカットのCtrl-Tabを入力する。
    - **確認**
        - タブのサムネイルが横一列に表示され、最近表示した順にタブが切り替わる。

    :2: タブバー上の並び順で切り替える（ESR60以前既定）

    - Firefoxを起動する。
    - 3つ以上のタブを開く。
    - キーボードショートカットのCtrl-Tabを入力する。
    - **確認**
        - タブのサムネイルが表示されず、タブが画面上の順番通りに切り替わる。

Tab-18: タブの複数選択

    :1: 許可する（既定）

    - Firefoxを起動する。
    - 2つ以上のタブを開く。
    - Ctrlキーを押しながら、アクティブでないタブをクリックする。
    - **確認**
        - クリックされたタブの色が変わり、複数のタブがハイライトされた状態になる。

    :2: 禁止する

    - Firefoxを起動する。
    - 2つ以上のタブを開く。
    - Ctrlキーを押しながら、アクティブでないタブをクリックする。
    - **確認**
        - クリックされたタブがフォーカスされる。

Tab-19: ハイライトにPocketの項目を表示するかどうか

    :1: 表示する（既定）

    ABOUT_POLICIES

    - `DisablePocket` が存在しないか、値が `false` である。

    :2: 表示しない

    ABOUT_POLICIES

    - `DisablePocket` の値が `true` である。

Tab-20: 新規タブに「Firefoxにようこそ」メッセージを表示するかどうか

    :1: 表示する（既定）

    - Firefoxを起動する。
    - 新しい空のタブを開く。
    - **確認**
        - 新規タブページの最上部に「Firefoxにようこそ」が表示されている。

    :2: 表示しない

    - Firefoxを起動する。
    - 新しい空のタブを開く。
    - **確認**
        - 新規タブページの最上部に「Firefoxにようこそ」が表示されていない。
